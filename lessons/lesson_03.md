# Урок 3. Примитивы языка

## Введение

Elixir является динамически-типизированным. Тип переменной проверяется только во время выполнения.
Используя оператор match =, мы можем привязать к имени переменной значение любого типа.

## Типы данных

Типы данных в Elixir основаны на примитивах предоставляемых Erlang, однако имеются свои отличия.
Условно можно разбить на следующие типы:

1. **Atom**: Атомы - это неизменяемые значения, которые используются для представления идентификаторов, имен и других констант. Они обычно используются для представления имен функций, модулей и других элементов кода.
2. **Boolean**: Булевые значения. Elixir поддерживает два значения логического типа: true и false.
3. **Tuple**: Кортежи - это структуры данных, которые могут содержать любое количество элементов. Они используются для представления пары или группы значений.
4. **List**: Списки - это упорядоченные коллекции элементов. Они могут содержать любое количество элементов и используются для представления последовательностей значений.
5. **Map**: Массив - это структура данных, которая представляет собой набор пар ключ-значение. Они используются для представления ассоциативных массивов или словарей.
6. **Keyword list**: Ключевой список - это специальный тип списка, который используется для представления ассоциативных массивов. Каждый элемент списка представляет собой пару ключ-значение, где ключ всегда является атомом.
7. **String**: Строка - это последовательность символов. Они используются для представления текстовых данных. В Elixir чаще всего их называют Binary.
8. **Integer**: Целое число - это число без дробной части. Они используются для представления числовых значений.
9. **Float**: Дробное число - это число с дробной частью. Они используются для представления числовых значений с плавающей точкой.


###  Атомы

Атом — это неизменяемое и уникальное значение, которое служит идентификатором. 
В Elixir атомы создаются с использованием символа `:` перед именем. Например, `:ok`, `:error` и `:user` представляют собой атомы. 
Атомы могут состоять из букв, цифр и специальных символов, причем первый символ должен быть буквенным или символом нижнего подчеркивания.
Названия модулей в Elixir — тоже атомы. App — валидный атом, даже если такой модуль ещё не был объявлен.

```elixir
iex(1)> is_atom(App)
true
```

### Булевые значения

Elixir поддерживает два значения логического типа: `true` и `false`, плюс можно добавить `nil` - отсутствие информации.
Абсолютно все значения в языке считаются истинными кроме `false` и `nil`.

Эти значения можно комбинировать с помощью булевых операторов `and`, `or`, `not`, которые работают только со значениями true и false:

```elixir
iex(1)> true and false
false
iex(2)> true or false
true
iex(3)> not false
true
```

С другими типами использовать нельзя:
```elixir
iex(4)> 35 and true
** (BadBooleanError) expected a boolean on left-side of "and", got: 35
    iex:4: (file)
```

Для более нестрогого использования Elixir предоставляет логические операторы `||`, `&&`, `!`. Они поддерживают работу с любыми типами:

```elixir
iex(1)> -10 || true
-10
iex(2)> false and 10
false
iex(3)> !33
false
iex(4)> !nil
true
```

### Целые числа

Целые числа могут быть представлены разными способами. 
Кроме десятичной системы исчисления поддерживаются также бинарные, восьмеричные и шестнадцатеричные числа.
Для больших чисел используют символ подчеркивания между разрядами для удобства чтения.

```elixir
iex(1)> 125
125
iex(2)> -1
-1
iex(3)> 0x1F
31
iex(4)> 5_000_000
5000000
```

### Числа с плавающей точкой

В Elixir числа с плавающей запятой требуют наличия хотя бы одной цифры перед точкой. Также они поддерживают `e` для описания экспонентной части:

```elixir
iex(1)> 3.14
3.14
iex(2)> -0.001
-0.001
iex(3)> 3.0e-10
3.0e-10
```

Самый простой способ приведения типа Integer к Float это разделить число на 1:
```elixir
iex(1)> 5 / 1
5.0
```

Плавающие числа известны своими коллизиями округления:
```elixir
iex(1)> 0.1 + 0.2
0.30000000000000004
```

Для исключения проблем при работе с такими числами можно использовать библиотеку `Decimal` в которой решена проблема с дробной арифметикой.

### Кортежи

Кортеж — это структура данных, которая позволяет хранить набор элементов в фиксированном порядке. 
В отличие от списков, которые имеют динамическую длину, кортежи имеют фиксированное количество элементов, определенное при их создании.
Кортежи в Elixir обозначаются фигурными скобками, например:
```elixir
iex(1)> {1, 2, 3}
{1, 2, 3}
iex(2)> {:ok, "message"}
{:ok, "message"}
```

Особенности кортежей:
* Фиксированный размер: Кортежи имеют фиксированный размер, что упрощает работу с ними, особенно в тех случаях, когда известное количество значений является необходимым.
* Удобство в сопоставлении с образцом: четкая и фиксированная структура.
* Высокая производительность: Из-за фиксированного размера и структуры кортежи обычно имеют лучшую производительность при доступе к элементам по сравнению со списками.

### Строки

Строки в Elixir обозначают двойными кавычками и кодируются в UTF-8:
```elixir
iex(1)> "Hello!"
"Hello!"
```

Строки можно конкатенировать с помощью оператора `<>`:
```elixir
iex(2)> "Hello" <> " " <> "Mike"
"Hello Mike"
```

Строки в Elixir поддерживают интерполяцию с помощью синтаксиса `#{}`:
```elixir
iex(1)> val = 123
123
iex(2)> "this is #{val} value"
"this is 123 value"
```

### Ключевой список

Список ключевых слов - это список кортежей {ключ, значение}. 

Существует два способа записи списка ключевых слов:

В явном виде:
```elixir
iex(1)> [{:foo, "bar"}, {:hello, "world"}]
[foo: "bar", hello: "world"]
```

Компактно:
```elixir
iex(2)> [foo: "bar", hello: "world"]
[foo: "bar", hello: "world"]
```

Особенности ключевых списков:
* Ключи являются атомами.
* Ключи имеют свой порядок.
* Ключи необязательно должны быть уникальными.

### Списки и массивы

Списки и массивы будут рассматрены в последующих уроках отдельно.
